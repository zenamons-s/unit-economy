import{F as f,aj as S,r as s,l as b,aK as y,j as l,aL as x,ay as R,o as h,m as T,Z as v,aM as B,aN as E,aO as j}from"./index.DSTThs-t.js";import{l as k}from"./index.8HslT92O.js";import{R as J}from"./main.Ccuk53yQ.js";const w=f("div",{target:"e1l93qjt0"})(({theme:o})=>({overflowY:"auto",position:"relative",".react-json-view .copy-icon svg":{fontSize:"1em !important",marginRight:`${o.spacing.threeXS} !important`,verticalAlign:"middle !important"}})),L=f("div",{target:"e1l93qjt1"})(({theme:o})=>({display:"flex",alignItems:"center",gap:o.spacing.sm,padding:o.spacing.sm,paddingLeft:o.spacing.md,fontFamily:o.genericFonts.codeFont,fontSize:o.fontSizes.twoSm,color:o.colors.bodyText,maxWidth:"90vw",wordBreak:"break-all"})),P=f("button",{target:"e1l93qjt2"})(({theme:o})=>({display:"flex",alignItems:"center",justifyContent:"center",padding:o.spacing.threeXS,backgroundColor:"transparent",border:"none",borderRadius:o.radii.md,cursor:"pointer",color:o.colors.fadedText60,transition:"color 0.15s ease, background-color 0.15s ease","&:hover":{backgroundColor:o.colors.darkenedBgMix15,color:o.colors.bodyText},"&:active":{backgroundColor:o.colors.darkenedBgMix25},"&:focus":{outline:"none"},"&:focus-visible":{boxShadow:S(o)}})),$=f("div",{target:"e1l93qjt3"})(({top:o,left:e})=>({position:"fixed",top:o,left:e}));function I({top:o,left:e,path:t,clearTooltip:d}){const[p,n]=s.useState(!0),r=b(),{colors:i,radii:a}=r,{isCopied:c,copyToClipboard:u,label:m}=y(),g=s.useCallback(()=>{n(!1),d()},[d]),C=s.useCallback(()=>{u(t)},[u,t]);return l(B,{content:h(L,{"data-testid":"stJsonPathTooltip",children:[l("code",{children:t}),l(P,{onClick:C,title:m,"aria-label":m,autoFocus:!0,children:l(v,{size:"sm",iconValue:c?":material/check:":":material/content_copy:"})})]}),placement:R.top,accessibilityType:x.tooltip,showArrow:!1,popoverMargin:15,onClickOutside:g,onEsc:g,overrides:{Body:{style:{borderTopLeftRadius:a.default,borderTopRightRadius:a.default,borderBottomLeftRadius:a.default,borderBottomRightRadius:a.default,paddingTop:"0 !important",paddingBottom:"0 !important",paddingLeft:"0 !important",paddingRight:"0 !important",backgroundColor:"transparent"}},Inner:{style:{backgroundColor:T(r)?i.bgColor:i.secondaryBg,color:i.bodyText,borderTopLeftRadius:a.default,borderTopRightRadius:a.default,borderBottomLeftRadius:a.default,borderBottomRightRadius:a.default,paddingTop:"0 !important",paddingBottom:"0 !important",paddingLeft:"0 !important",paddingRight:"0 !important"}}},isOpen:p,children:l($,{"data-testid":"stJsonPathTooltipTarget",top:o,left:e})})}const F=s.memo(I);function z(o){return o.length===0?"$":o.reduce((e,t,d)=>{if(t===null)return e;if(/^\d+$/.test(t))return`${e}[${t}]`;if(t===""||/[^a-zA-Z0-9_$]/.test(t)||/^\d/.test(t)){const r=t.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return`${e}["${r}"]`}return d===0||e===""?t:`${e}.${t}`},"")}function O(){const[o,e]=s.useState(null),t=s.useRef({x:0,y:0});s.useEffect(()=>{const n=r=>{t.current={x:r.clientX,y:r.clientY}};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const d=s.useCallback(n=>{const{x:r,y:i}=t.current,a=[...n.namespace,n.name],c=z(a);e({path:c,x:r,y:i})},[]),p=s.useCallback(()=>{e(null)},[]);return{tooltip:o,handleSelect:d,clearTooltip:p}}function A({element:o}){const e=b(),{tooltip:t,handleSelect:d,clearTooltip:p}=O(),{copyToClipboard:n}=y(),r=s.useCallback(c=>{n(JSON.stringify(c.src))},[n]);let i;try{i=JSON.parse(o.body)}catch(c){const u=E(c);try{i=k.parse(o.body)}catch{const g=parseInt(u.message.replace(/[^0-9]/g,""),10);return u.message+=`
${o.body.substring(0,g+1)} ‚Üê here`,l(j,{name:"Json Parse Error",message:u.message})}}const a=T(e)?"rjv-default":"monokai";return h(w,{className:"stJson","data-testid":"stJson",children:[l(J,{src:i,collapsed:o.maxExpandDepth??!o.expanded,displayDataTypes:!1,displayObjectSize:!1,name:!1,theme:a,enableClipboard:r,onSelect:d,style:{fontFamily:e.genericFonts.codeFont,fontSize:e.fontSizes.codeFontSize,fontWeight:e.fontWeights.code,backgroundColor:e.colors.bgColor,whiteSpace:"pre-wrap"}}),t&&l(F,{top:t.y,left:t.x,path:t.path,clearTooltip:p})]})}const D=s.memo(A);export{D as default};
